<!DOCTYPE html>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  
  <title itemprop="name">Springç›¸å…³çš„6ä¸ªæ³¨è§£æ¢å¯»è·¯ | ãƒŠãƒãƒ¥ãƒ©ãƒ«</title>
  
    <link rel="shortcut icon" href="/img/favicon.ico">
  
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+SerifMerriweather|Merriweather+Sans|Source+Code+Pro|Ubuntu:400,700|Noto+Serif+SC" media="all">
  <link rel="dns-prefetch" href="//cdn.jsdelivr.net">
  <link rel="stylesheet" id="saukra_css-css" href="/css/style.css" type="text/css" media="all">
  <link rel="stylesheet" href="/css/lib.min.css" media="all">
  <link rel="stylesheet" href="/css/font.css" media="all">
  <link rel="stylesheet" href="/css/insight.css" media="all">
  <link rel="stylesheet" href="/css/jquery.fancybox.min.css" media="all">
  <link rel="stylesheet" href="/css/zoom.css" media="all">
  <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<!--   <link rel="stylesheet" id="saukra_css-css" href="https://2heng.xin/wp-content/cache/autoptimize/css/autoptimize_ad42a61f4c7d4bdd9f91afcff6b5dda5.css
" type="text/css" media="all"> -->
  <script>
  /*Initial Variables*/
  var mashiro_option = new Object();
  var mashiro_global = new Object();
  mashiro_option.NProgressON = true;
  /* 
   * é‚®ç®±ä¿¡æ¯ä¹‹ç±»çš„ä¸œè¥¿å¯ä»¥å¡«åœ¨è¿™é‡Œï¼Œè¿™äº›jså˜é‡åŸºæœ¬éƒ½ä½œç”¨äºsakura-app.js
   * è¿™æ ·çš„è®¾ç½®ä»…æ˜¯ä¸ºäº†æ–¹ä¾¿åœ¨åŸºäºPHPå¼€å‘çš„ä¸»é¢˜ä¸­è®¾ç½®jså˜é‡ï¼Œæ—¢ç„¶ç§»æ¤åˆ°äº†Nodeä¸Šï¼Œæˆ‘æƒ³æˆ–è®¸å¯ä»¥ç²¾ç®€è¿™ä¸€é€»è¾‘å§
   */
  mashiro_option.email_domain = "";
  mashiro_option.email_name = "";
  mashiro_option.cookie_version_control = "";
  mashiro_option.qzone_autocomplete = false;
  mashiro_option.site_name = "ãƒŠãƒãƒ¥ãƒ©ãƒ«blnp";
  mashiro_option.author_name = "blnp";
  mashiro_option.site_url = "/";
  mashiro_option.v_appId = "uxygA8bNWrpfwUvb6bMzegq8-gzGzoHsz";
  mashiro_option.v_appKey = "E4hOT01N1yMBmFGk0koDAj9v";
  mashiro_option.mathjax = "0";
  mashiro_option.qq_api_url = "https://api.mashiro.top/qqinfo/"; 
  mashiro_option.qq_avatar_api_url = "https://api.mashiro.top/qqinfo/";

  // mashiro_option.jsdelivr_css_src = "https://cdn.jsdelivr.net/gh/moezx/cdn@3.4.5/css/lib.min.css";
  // mashiro_option.float_player_on = true;

  /*End of Initial Variables*/
  </script>
  <script type="text/javascript">
  var bg = "https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/cover/(1).jpg.webp,https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/cover/(2).jpg.webp,https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/cover/(3).jpg.webp,https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/cover/(4).jpg.webp,https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/cover/(5).jpg.webp,https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/cover/(6).jpg.webp,https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/cover/(7).jpg.webp,https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/cover/(8).jpg.webp".split(",");
  var bgindex = Math.floor(Math.random()*bg.length);
  if (!!window.ActiveXObject || "ActiveXObject" in window) { //is IE?
    alert('æœ‹å‹ï¼ŒIEæµè§ˆå™¨æœªé€‚é…å“¦~');
  }
  </script>
  <style type="text/css">
  .hljs-ln{border-collapse:collapse}.hljs-ln td{padding:0}.hljs-ln-n:before{content:attr(data-line-number)}
  </style>
  <style type="text/css">.site-top .lower nav{display:block !important;}.author-profile i,.post-like a,.post-share .show-share,.sub-text,.we-info a,span.sitename,.post-more i:hover,#pagination a:hover,.post-content a:hover,.float-content i:hover{color:#FE9600}.feature i,.download,.navigator i:hover,.links ul li:before,.ar-time i,span.ar-circle,.object,.comment .comment-reply-link,.siren-checkbox-radio:checked + .siren-checkbox-radioInput:after{background:#FE9600}::-webkit-scrollbar-thumb{background:#FE9600}.download,.navigator i:hover,.link-title,.links ul li:hover,#pagination a:hover,.comment-respond input[type='submit']:hover{border-color:#FE9600}.entry-content a:hover,.site-info a:hover,.comment h4 a,#comments-navi a.prev,#comments-navi a.next,.comment h4 a:hover,.site-top ul li a:hover,.entry-title a:hover,#archives-temp h3,span.page-numbers.current,.sorry li a:hover,.site-title a:hover,i.iconfont.js-toggle-search.iconsearch:hover,.comment-respond input[type='submit']:hover{color:#FE9600}.comments .comments-main{display:block !important;}.comments .comments-hidden{display:none !important;}background-position:center center;background-attachment:inherit;}
  </style>
</head>
</html>
<body class="page-template page-template-user page-template-page-analytics page-template-userpage-analytics-php page page-id-1297 chinese-font serif isWebKit">
  <div class="scrollbar" id="bar">
  </div>
  <a href="#" class="cd-top faa-float animated"></a>
  <section id="main-container">
    <div class="headertop filter-dot">
  <div id="banner_wave_1"></div>
  <div id="banner_wave_2"></div>
  <figure id="centerbg" class="centerbg">
    <div class="focusinfo no-select">
      <div class="header-tou">
        <a href="/">
          <img src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/avatar.png">
        </a>
      </div>
      <div class="header-info">
        <p>Promises are often like the dust.</p>
        <div class="top-social_v2">
          <li id="bg-pre">
            <img class="flipx" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
          
            
              
                <li>
                  <a href="http://github.com/yibinliao" target="_blank" class="social-github" title="github">
                    <img src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/social/github.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://weibo.com/p/1005055035417004/home?from=page_100505&amp;mod=TAB#place" target="_blank" class="social-github" title="sina">
                    <img src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/social/sina.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://music.163.com/#/user/home?id=379372220" target="_blank" class="social-github" title="wangyiyun">
                    <img src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/social/wangyiyun.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://www.zhihu.com/people/qian-xin-83-38/activities" target="_blank" class="social-github" title="zhihu">
                    <img src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/social/zhihu.png">
                  </a>
                </li>
              
            
              
                <li>
                  <a href="https://www.zhihu.com/people/qian-xin-83-38/activities" target="_blank" class="social-github" title="email">
                    <img src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/social/email.svg">
                  </a>
                </li>
              
            
              
                <li class="wechat">
                  <a href="/#">
                    <img src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/social/wechat.png">
                  </a>
                  <div class="wechatInner">
                    <img src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/social/wechatInfo.png">
                  </div>
                </li>
              
            
          
          <li id="bg-next">
            <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/next-b.svg">
          </li>
        </div>
      </div>
    </div>
  </figure>
  <div id="video-container" style="">
    <video style="object-fit: fill" id="bgvideo" class="video" video-name="" src="" width="auto" preload="auto">
    </video>
    <div id="video-btn" class="loadvideo videolive">
    </div>
    <div id="video-add">
    </div>
    <div class="video-stu">
    </div>
  </div>
  <div class="headertop-down faa-float animated" onclick="headertop_down()">
    <span>
      <i class="fa fa-chevron-down" aria-hidden="true">
      </i>
    </span>
  </div>
</div>
    <div id="page" class="site wrapper">
      <header class="site-header no-select gizle sabit" role="banner">
  <div class="site-top">
    <div class="site-branding">
      <span class="site-title">
        <span class="logolink moe-mashiro">
          <a href="/">
            <span class="sakurasono">ãƒŠãƒãƒ¥ãƒ©ãƒ«</span>
            <span class="shironeko">blnp</span>
          </a>
        </span>
      </span>
    </div>
    <div class="searchbox search-form-submit">
      <i class="iconfont js-toggle-search iconsearch icon-search">
      </i>
    </div>
    <div id="show-nav" class="showNav mobile-fit">
      <div class="line line1">
      </div>
      <div class="line line2">
      </div>
      <div class="line line3">
      </div>
    </div>
    <div class="lower-cantiner">
      <div class="lower">
        <nav class="mobile-fit-control hide">
          <ul id="menu-new" class="menu">
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
                    é¦–é¡µ
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/archives">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
                    å½’æ¡£
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/categories/æŠ€æœ¯/">
                          <i class="fa fa-code" aria-hidden="true"></i>
                          æŠ€æœ¯
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="javascript:;">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
                    æ¸…å•
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/tags/æ‚¦è¯»/">
                          <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                          ä¹¦å•
                        </a>
                      </li>
                    
                      <li>
                        <a href="/bangumi/">
                          <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                          ç•ªç»„
                        </a>
                      </li>
                    
                      <li>
                        <a href="/music/">
                          <i class="fa fa-headphones" aria-hidden="true"></i>
                          æ­Œå•
                        </a>
                      </li>
                    
                      <li>
                        <a href="/tags/å›¾é›†/">
                          <i class="fa fa-photo" aria-hidden="true"></i>
                          å›¾é›†
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
              <li>
                <a href="/comment/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
                    ç•™è¨€æ¿
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/links/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
                    å‹äººå¸
                  </span>
                </a>
                
              </li>
            
              <li>
                <a href="/">
                  <span class="faa-parent animated-hover">
                    <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
                    å…³äº
                  </span>
                </a>
                
                  <ul class="sub-menu">
                    
                      <li>
                        <a href="/about/">
                          <i class="fa fa-meetup" aria-hidden="true"></i>
                          æˆ‘ï¼Ÿ
                        </a>
                      </li>
                    
                      <li>
                        <a href="/theme-sakura/">
                          <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                          ä¸»é¢˜
                        </a>
                      </li>
                    
                      <li>
                        <a href="/lab/">
                          <i class="fa fa-cogs" aria-hidden="true"></i>
                          Lab
                        </a>
                      </li>
                    
                  </ul>
                
              </li>
            
          </ul>
        </nav>
      </div>
    </div>
  </div>
</header>

      <link rel="stylesheet" type="text/css" href="/css/sharejs.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css">
<div class="pattern-center-blank"></div>

  <div class="pattern-center single-center">
    <!-- æœ‰é…å›¾é»˜è®¤æ¸²æŸ“ç¬¬ä¸€å¼  -->
    <div class="pattern-attachment-img lazyload" style="background-image: url(https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/uploads/2019-12-12-note-2.png);" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/uploads/2019-12-12-note-2.png">
    </div>
    <header class="pattern-header single-header">
      <h1 class="entry-title">
      Springç›¸å…³çš„6ä¸ªæ³¨è§£æ¢å¯»è·¯</h1>
      <p class="entry-census">
        <span>
          <a href="">
            <img src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3/img/avatar.png">
          </a>
        </span>
        <span>
          <a href="">yibin</a>
        </span>
        <span class="bull">
        Â·</span>
        2019-12-12<span class="bull">
        Â·</span>
      <span id="busuanzi_value_page_pv"></span>æ¬¡é˜…è¯»</p>
    </header>
  </div>

<div id="content" class="site-content">
  <div id="primary" class="content-area">
    <main id="main" class="site-main" role="main">
      <article id="post-1" class="post-1 post type-post status-publish format-standard has-post-thumbnail hentry category-uncategorized">
        <div class="toc"></div>
        <!--<div class="toc-entry-content"><!-- å¥—åµŒç›®å½•ä½¿ç”¨ï¼ˆä¸»è¦ä¸ºäº†æ”¯æ´è¯„è®ºï¼‰-->
        
        <div class="entry-content">
          <hr>
<ul>
<li><strong>è½¬è½½è¯·æ³¨æ˜ä½œè€…å’Œå‡ºå¤„ï¼š<a href="https://blog.csdn.net/qq_37165235" target="_blank" rel="noopener">https://blog.csdn.net/qq_37165235</a></strong></li>
<li><strong>æ“ä½œç³»ç»Ÿï¼šWINDOWS 10</strong></li>
<li><strong>è½¯ä»¶ç‰ˆæœ¬ï¼šheo+next-5.1.4</strong></li>
<li><strong>ç¼–&emsp;&emsp;è€…ï¼šæµ…æ­Œä½™ç”Ÿ</strong></li>
</ul>
<hr>
<blockquote>
<p>åœ¨è¿™é‡Œæ¢³ç†äº†åœ¨é¡¹ç›®ä¸­ä¸Spring Bootæ³¨è§£é…åˆæœ€ä¸ºç´§å¯†çš„6ä¸ªSpringåŸºç¡€æ¡†æ¶çš„æ³¨è§£ã€‚å¦‚ğŸ‘‡  </p>
</blockquote>
<h1 id="1ã€-Configuration"><a href="#1ã€-Configuration" class="headerlink" title="1ã€@Configuration"></a>1ã€@Configuration</h1><p>&emsp;&emsp;ä»Spring3.0ï¼Œ@Configurationç”¨äºå®šä¹‰é…ç½®ç±»ï¼Œå¯æ›¿æ¢xmlé…ç½®æ–‡ä»¶ï¼Œè¢«æ³¨è§£çš„ç±»å†…éƒ¨åŒ…å«æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªè¢«@Beanæ³¨è§£çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å°†ä¼šè¢«AnnotationConfigApplicationContextæˆ–AnnotationConfigWebApplicationContextç±»è¿›è¡Œæ‰«æï¼Œå¹¶ç”¨äºæ„å»ºbeanå®šä¹‰ï¼Œåˆå§‹åŒ–Springå®¹å™¨ã€‚  </p>
<h3 id="ä»£ç ç¤ºä¾‹"><a href="#ä»£ç ç¤ºä¾‹" class="headerlink" title="ä»£ç ç¤ºä¾‹"></a>ä»£ç ç¤ºä¾‹</h3><pre><code class="java">@Configuration
public class TaskAutoConfiguration {
    @Bean
    @Profile(&quot;biz-electrfence-controller&quot;)
    public BizElectrfenceControllerJob bizElectrfenceControllerJob() {
        return new BizElectrfenceControllerJob();
    }

    @Bean
    @Profile(&quot;biz-consume-1-datasync&quot;)
    public BizBikeElectrFenceTradeSyncJob bizBikeElectrFenceTradeSyncJob() {
        return new BizBikeElectrFenceTradeSyncJob();
    }
}
</code></pre>
<h1 id="2ã€-ComponentScan"><a href="#2ã€-ComponentScan" class="headerlink" title="2ã€@ComponentScan"></a>2ã€@ComponentScan</h1><p>&emsp;&emsp;åšè¿‡webå¼€å‘çš„åŒå­¦ä¸€å®šéƒ½æœ‰ç”¨è¿‡@Controllerï¼Œ@Serviceï¼Œ@Repositoryæ³¨è§£ï¼ŒæŸ¥çœ‹å…¶æºç ä½ ä¼šå‘ç°ï¼Œä»–ä»¬ä¸­æœ‰ä¸€ä¸ªå…±åŒçš„æ³¨è§£@Componentï¼Œæ²¡é”™@ComponentScanæ³¨è§£é»˜è®¤å°±ä¼šè£…é…æ ‡è¯†äº†@Controllerï¼Œ@Serviceï¼Œ@Repositoryï¼Œ@Componentæ³¨è§£çš„ç±»åˆ°springå®¹å™¨ä¸­ã€‚  </p>
<h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><pre><code class="java">@ComponentScan(value = &quot;com.abacus.check.api&quot;)
public class CheckApiApplication {
    public static void main(String[] args) {
        SpringApplication.run(CheckApiApplication.class, args);
    }
}  
</code></pre>
<blockquote>
<p>@SpringBootApplicationæ³¨è§£ä¹ŸåŒ…å«äº†@ComponentScanæ³¨è§£ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡<br>@SpringBootApplicationæ³¨è§£çš„scanBasePackageså±æ€§è¿›è¡Œé…ç½®ã€‚  </p>
</blockquote>
<h3 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><pre><code class="java">@SpringBootApplication(scanBasePackages =  {
    &quot;com.abacus.check.api&quot;, &quot;com.abacus.check.service&quot;}
)
public class CheckApiApplication {
    public static void main(String[] args) {
        SpringApplication.run(CheckApiApplication.class, args);
    }
}
</code></pre>
<h1 id="3ã€-Conditional"><a href="#3ã€-Conditional" class="headerlink" title="3ã€@Conditional"></a>3ã€@Conditional</h1><p>&emsp;&emsp;@Conditionalæ˜¯Spring4æ–°æä¾›çš„æ³¨è§£ï¼Œé€šè¿‡@Conditionalæ³¨è§£å¯ä»¥æ ¹æ®ä»£ç ä¸­è®¾ç½®çš„æ¡ä»¶è£…è½½ä¸åŒçš„beanï¼Œåœ¨è®¾ç½®æ¡ä»¶æ³¨è§£ä¹‹å‰ï¼Œå…ˆè¦æŠŠè£…è½½çš„beanç±»å»å®ç°Conditionæ¥å£ï¼Œç„¶åå¯¹è¯¥å®ç°æ¥å£çš„ç±»è®¾ç½®æ˜¯å¦è£…è½½çš„æ¡ä»¶ã€‚Spring Bootæ³¨è§£ä¸­çš„@ConditionalOnPropertyã€@ConditionalOnBeanç­‰ä»¥@Conditional*å¼€å¤´çš„æ³¨è§£ï¼Œéƒ½æ˜¯é€šè¿‡é›†æˆäº†@Conditionalæ¥å®ç°ç›¸åº”åŠŸèƒ½çš„ã€‚  </p>
<h4 id="Conditionalçš„å®šä¹‰ï¼š"><a href="#Conditionalçš„å®šä¹‰ï¼š" class="headerlink" title="@Conditionalçš„å®šä¹‰ï¼š"></a>@Conditionalçš„å®šä¹‰ï¼š</h4><pre><code class="java">//æ­¤æ³¨è§£å¯ä»¥æ ‡æ³¨åœ¨ç±»å’Œæ–¹æ³•ä¸Š
@Target({ElementType.TYPE,
    ElementType.METHOD
})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface Conditional {
    Class&lt;?extends Condition&gt;[] value();
}
</code></pre>
<blockquote>
<p>ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œéœ€è¦ä¼ å…¥ä¸€ä¸ªClassæ•°ç»„ï¼Œå¹¶ä¸”éœ€è¦ç»§æ‰¿Conditionæ¥å£ï¼š  </p>
</blockquote>
<pre><code class="java">public interface Condition {
    boolean matches(ConditionContext var1, AnnotatedTypeMetadata var2);
}
</code></pre>
<blockquote>
<p>Conditionæ˜¯ä¸ªæ¥å£ï¼Œéœ€è¦å®ç°matchesæ–¹æ³•ï¼Œè¿”å›trueåˆ™æ³¨å…¥beanï¼Œfalseåˆ™ä¸æ³¨å…¥ã€‚  </p>
</blockquote>
<h4 id="ç¤ºä¾‹ï¼š"><a href="#ç¤ºä¾‹ï¼š" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h4><blockquote>
<p>é¦–å…ˆï¼Œåˆ›å»ºPersonç±»ï¼š<br><code>`</code> java<br>public class Person {<br>    private String name;<br>    private Integer age;</p>
</blockquote>
<pre><code>public Person(String name, Integer age) {
    this.name = name;
    this.age = age;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public Integer getAge() {
    return age;
}

public void setAge(Integer age) {
    this.age = age;
}

@Override
public String toString() {
    return &quot;Person{&quot; + &quot;name=&#39;&quot; + name + &#39;\&#39;&#39; + &quot;, age=&quot; + age + &#39;}&#39;;
}
</code></pre><p>}</p>
<pre><code>

&gt;åˆ›å»ºBeanConfigç±»ï¼Œç”¨äºé…ç½®ä¸¤ä¸ªPersonå®ä¾‹å¹¶æ³¨å…¥ï¼Œä¸€ä¸ªæ˜¯æ¯”å°”ç›–èŒ¨ï¼Œä¸€ä¸ªæ˜¯æ—çº³æ–¯ã€‚  

``` java
@Configuration
public class BeanConfig {
    @Bean(name = &quot;bill&quot;)
    public Person person1() {
        return new Person(&quot;Bill Gates&quot;, 62);
    }

    @Bean(&quot;linus&quot;)
    public Person person2() {
        return new Person(&quot;Linus&quot;, 48);
    }
}
</code></pre><blockquote>
<p>æ¥ç€å†™ä¸€ä¸ªæµ‹è¯•ç±»è¿›è¡ŒéªŒè¯è¿™ä¸¤ä¸ªBeanæ˜¯å¦æ³¨å…¥æˆåŠŸã€‚  </p>
</blockquote>
<pre><code class="java">public class ConditionalTest {
    AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext(BeanConfig.class);

    @Test
    public void test1() {
        Map&lt;String, Person&gt; map = applicationContext.getBeansOfType(Person.class);
        System.out.println(map);
    }
}
</code></pre>
<blockquote>
<p>è¿è¡Œï¼Œè¾“å‡ºç»“æœæ˜¯è¿™æ ·çš„ï¼Œä¸¤ä¸ªPersonå®ä¾‹è¢«æ³¨å…¥è¿›å®¹å™¨ã€‚è¿è¡Œï¼Œè¾“å‡ºç»“æœæ˜¯è¿™æ ·çš„ï¼Œä¸¤ä¸ªPersonå®ä¾‹è¢«æ³¨å…¥è¿›å®¹å™¨ã€‚  </p>
</blockquote>
<pre><code class="java">{bill=Person{name=&#39;Bill Gates&#39;,age=62},linus=Person={name=&#39;Linus&#39;,age=48}}
</code></pre>
<blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œç°åœ¨é—®é¢˜æ¥äº†ï¼Œå¦‚æœæˆ‘æƒ³æ ¹æ®å½“å‰æ“ä½œç³»ç»Ÿæ¥æ³¨å…¥Personå®ä¾‹ï¼Œwindowsä¸‹æ³¨å…¥billï¼Œlinuxä¸‹æ³¨å…¥linusï¼Œæ€ä¹ˆå®ç°å‘¢ï¼Ÿ</p>
<p>è¿™å°±éœ€è¦æˆ‘ä»¬ç”¨åˆ°@Conditionalæ³¨è§£äº†ï¼Œå‰è¨€ä¸­æåˆ°ï¼Œéœ€è¦å®ç°Conditionæ¥å£ï¼Œå¹¶é‡å†™æ–¹æ³•æ¥è‡ªå®šä¹‰matchè§„åˆ™ã€‚  </p>
</blockquote>
<blockquote>
<p>é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªWindowsConditionç±»ï¼š  </p>
</blockquote>
<pre><code class="java">public class WindowsCondition implements Condition {
    /**
     * @param conditionContext:åˆ¤æ–­æ¡ä»¶èƒ½ä½¿ç”¨çš„ä¸Šä¸‹æ–‡ç¯å¢ƒ
     * @param annotatedTypeMetadata:æ³¨è§£æ‰€åœ¨ä½ç½®çš„æ³¨é‡Šä¿¡æ¯
     * */
    @Override
    public boolean matches(ConditionContext conditionContext,
        AnnotatedTypeMetadata annotatedTypeMetadata) {
        //è·å–iocä½¿ç”¨çš„beanFactory
        ConfigurableListableBeanFactory beanFactory = conditionContext.getBeanFactory();

        //è·å–ç±»åŠ è½½å™¨
        ClassLoader classLoader = conditionContext.getClassLoader();

        //è·å–å½“å‰ç¯å¢ƒä¿¡æ¯
        Environment environment = conditionContext.getEnvironment();

        //è·å–beanå®šä¹‰çš„æ³¨å†Œç±»
        BeanDefinitionRegistry registry = conditionContext.getRegistry();

        //è·å¾—å½“å‰ç³»ç»Ÿå
        String property = environment.getProperty(&quot;os.name&quot;);

        //åŒ…å«Windowsåˆ™è¯´æ˜æ˜¯windowsç³»ç»Ÿï¼Œè¿”å›true
        if (property.contains(&quot;Windows&quot;)) {
            return true;
        }

        return false;
    }
}
</code></pre>
<blockquote>
<p>matchesæ–¹æ³•çš„ä¸¤ä¸ªå‚æ•°çš„æ„æ€åœ¨æ³¨é‡Šä¸­è®²è¿°äº†ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼ŒconditionContextæä¾›äº†å¤šç§æ–¹æ³•ï¼Œæ–¹ä¾¿è·å–å„ç§ä¿¡æ¯ï¼Œä¹Ÿæ˜¯SpringBootä¸­ @ConditonalOnXXæ³¨è§£å¤šæ ·æ‰©å±•çš„åŸºç¡€ã€‚</p>
<p>æ¥ç€ï¼Œåˆ›å»ºLinuxConditionç±»ï¼š  </p>
</blockquote>
<pre><code class="java">public class LinuxCondition implements Condition {
    @Override
    public boolean matches(ConditionContext conditionContext,
        AnnotatedTypeMetadata annotatedTypeMetadata) {
        Environment environment = conditionContext.getEnvironment();

        String property = environment.getProperty(&quot;os.name&quot;);

        if (property.contains(&quot;Linux&quot;)) {
            return true;
        }

        return false;
    }
}
</code></pre>
<p>æ¥ç€å°±æ˜¯ä½¿ç”¨è¿™ä¸¤ä¸ªç±»äº†ï¼Œå› ä¸ºæ­¤æ³¨è§£å¯ä»¥æ ‡æ³¨åœ¨æ–¹æ³•ä¸Šå’Œç±»ä¸Šï¼Œæ‰€ä»¥åˆ†å¼€æµ‹è¯•ï¼š  </p>
<h4 id="æ ‡æ³¨åœ¨æ–¹æ³•ä¸Šï¼š"><a href="#æ ‡æ³¨åœ¨æ–¹æ³•ä¸Šï¼š" class="headerlink" title="æ ‡æ³¨åœ¨æ–¹æ³•ä¸Šï¼š"></a>æ ‡æ³¨åœ¨æ–¹æ³•ä¸Šï¼š</h4><p>ä¿®æ”¹BeanConfigï¼š</p>
<pre><code class="java">@Configuration
public class BeanConfig {
    //åªæœ‰ä¸€ä¸ªç±»æ—¶ï¼Œå¤§æ‹¬å·å¯ä»¥çœç•¥
    //å¦‚æœWindowsConditionçš„å®ç°æ–¹æ³•è¿”å›trueï¼Œåˆ™æ³¨å…¥è¿™ä¸ªbean    
    @Conditional({WindowsCondition.class
    })
    @Bean(name = &quot;bill&quot;)
    public Person person1() {
        return new Person(&quot;Bill Gates&quot;, 62);
    }

    //å¦‚æœLinuxConditionçš„å®ç°æ–¹æ³•è¿”å›trueï¼Œåˆ™æ³¨å…¥è¿™ä¸ªbean
    @Conditional({LinuxCondition.class
    })
    @Bean(&quot;linus&quot;)
    public Person person2() {
        return new Person(&quot;Linus&quot;, 48);
    }
}
</code></pre>
<blockquote>
<p>ä¿®æ”¹æµ‹è¯•æ–¹æ³•ï¼Œä½¿å…¶å¯ä»¥æ‰“å°å½“å‰ç³»ç»Ÿåï¼šè¿è¡Œç»“æœå¦‚ä¸‹ï¼š  </p>
</blockquote>
<pre><code class="java">å½“å‰ç³»ç»Ÿä¸ºï¼šWindows 10
{bill=Person{name=&#39;Bill Gates&#39;,age=62}}
</code></pre>
<p>æ¥ç€æµ‹è¯•åœ¨Linuxç³»ç»Ÿï¼Œç”±äºæ˜¯Windowsç³»ç»Ÿæ‰€ä»¥ç›´æ¥ä¿®æ”¹è¿è¡Œå‚æ•°ï¼š<br><img src="https://liaoyibin.vip/images/2019-12-12-note-002-1.png" alt="image">  </p>
<blockquote>
<p>ä¿®æ”¹å‚æ•°  </p>
</blockquote>
<p>VM option:    -Dos.name=Linux  </p>
<blockquote>
<p>ä¿®æ”¹åå¯åŠ¨æµ‹è¯•</p>
<pre><code class="java">å½“å‰ç³»ç»Ÿä¸ºï¼šLinux
{linus=Person={name=&#39;Linus&#39;,age=48}}
</code></pre>
</blockquote>
<p><span style="color:red"> ä¸€ä¸ªæ–¹æ³•åªèƒ½æ³¨å…¥ä¸€ä¸ªbeanå®ä¾‹ï¼Œæ‰€ä»¥@Conditionalæ ‡æ³¨åœ¨æ–¹æ³•ä¸Šåªèƒ½æ§åˆ¶ä¸€ä¸ªbeanå®ä¾‹æ˜¯å¦æ³¨å…¥ã€‚</span>  </p>
<h4 id="æ ‡æ³¨åœ¨ç±»ä¸Šï¼š"><a href="#æ ‡æ³¨åœ¨ç±»ä¸Šï¼š" class="headerlink" title="æ ‡æ³¨åœ¨ç±»ä¸Šï¼š"></a>æ ‡æ³¨åœ¨ç±»ä¸Šï¼š</h4><p>&emsp;&emsp;<span style="color:red">ä¸€ä¸ªç±»ä¸­å¯ä»¥æ³¨å…¥å¾ˆå¤šå®ä¾‹ï¼Œ@Conditionalæ ‡æ³¨åœ¨ç±»ä¸Šå°±å†³å®šäº†ä¸€æ‰¹beanæ˜¯å¦æ³¨å…¥ã€‚</span><br>æˆ‘ä»¬è¯•ä¸€ä¸‹ï¼Œå°†BeanConfigæ”¹å†™ï¼Œè¿™æ—¶ï¼Œå¦‚æœWindowsConditionè¿”å›trueï¼Œåˆ™ä¸¤ä¸ªPersonå®ä¾‹å°†è¢«æ³¨å…¥(æ³¨æ„ï¼šä¸Šä¸€ä¸ªæµ‹è¯•å°†os.nameæ”¹ä¸ºlinuxï¼Œè¿™æ˜¯æˆ‘å°†æŠŠè¿™ä¸ªå‚æ•°å»æ‰)ï¼š  </p>
<pre><code class="java">@Conditional({WindowsCondition.class
})
@Configuration
public class BeanConfig {
    @Bean(name = &quot;bill&quot;)
    public Person person1() {
        return new Person(&quot;Bill Gates&quot;, 62);
    }

    @Bean(&quot;linus&quot;)
    public Person person2() {
        return new Person(&quot;Linus&quot;, 48);
    }
}
</code></pre>
<blockquote>
<p>ç»“æœä¸¤ä¸ªå®ä¾‹éƒ½è¢«æ³¨å…¥ï¼š   </p>
</blockquote>
<pre><code class="java">{bill=Person={name=&#39;Bill Gates&#39;,age=62},linus=Person={name=&#39;Linus&#39;,age=48}}
</code></pre>
<blockquote>
<p>å¦‚æœå°†ç±»ä¸Šçš„WindowsCondition.classæ”¹ä¸ºLinuxCondition.classï¼Œç»“æœåº”è¯¥å¯ä»¥çŒœåˆ°ï¼š  </p>
</blockquote>
<pre><code class="java">{}
</code></pre>
<blockquote>
<p>ç»“æœå°±æ˜¯ç©ºçš„ï¼Œç±»ä¸­æ‰€æœ‰beanéƒ½æ²¡æœ‰æ³¨å…¥ã€‚  </p>
</blockquote>
<h3 id="å¤šä¸ªæ¡ä»¶ç±»ï¼š"><a href="#å¤šä¸ªæ¡ä»¶ç±»ï¼š" class="headerlink" title="å¤šä¸ªæ¡ä»¶ç±»ï¼š"></a>å¤šä¸ªæ¡ä»¶ç±»ï¼š</h3><p>&emsp;&emsp;å‰è¨€ä¸­è¯´ï¼Œ@Conditionalæ³¨è§£ä¼ å…¥çš„æ˜¯ä¸€ä¸ªClassæ•°ç»„ï¼Œå­˜åœ¨å¤šç§æ¡ä»¶ç±»çš„æƒ…å†µã€‚<br>è¿™ç§æƒ…å†µè²Œä¼¼åˆ¤æ–­éš¾åº¦åŠ æ·±äº†ï¼Œæµ‹è¯•ä¸€æ³¢ï¼Œæ–°å¢æ–°çš„æ¡ä»¶ç±»ï¼Œå®ç°çš„matchesè¿”å›falseï¼ˆè¿™ç§å†™æ­»è¿”å›falseçš„æ–¹æ³•çº¯å±æµ‹è¯•ç”¨ï¼Œæ²¡æœ‰å®é™…æ„ä¹‰O(âˆ©_âˆ©)Oï¼‰  </p>
<pre><code class="java">public class ObstinateCondition implements Condition {
    @Override
    public boolean matches(ConditionContext conditionContext,
        AnnotatedTypeMetadata annotatedTypeMetadata) {
        return false;
    }
}
</code></pre>
<blockquote>
<p>BeanConfigä¿®æ”¹ä¸€ä¸‹ï¼š  </p>
</blockquote>
<pre><code class="java">@Conditional({WindowsCondition.class,
    ObstinateCondition.class
})
@Configuration
public class BeanConfig {
    @Bean(name = &quot;bill&quot;)
    public Person person1() {
        return new Person(&quot;Bill Gates&quot;, 62);
    }

    @Bean(&quot;linus&quot;)
    public Person person2() {
        return new Person(&quot;Linus&quot;, 48);
    }
}
</code></pre>
<blockquote>
<p>ç»“è®ºå¾—:  </p>
</blockquote>
<pre><code>ç¬¬ä¸€ä¸ªæ¡ä»¶ç±»å®ç°çš„æ–¹æ³•è¿”å›trueï¼Œç¬¬äºŒä¸ªè¿”å›falseï¼Œåˆ™ç»“æœfalseï¼Œä¸æ³¨å…¥è¿›å®¹å™¨ã€‚  
ç¬¬ä¸€ä¸ªæ¡ä»¶ç±»å®ç°çš„æ–¹æ³•è¿”å›trueï¼Œç¬¬äºŒä¸ªè¿”å›trueï¼Œåˆ™ç»“æœtrueï¼Œæ³¨å…¥è¿›å®¹å™¨ä¸­ã€‚  
</code></pre><h1 id="4ã€-Import"><a href="#4ã€-Import" class="headerlink" title="4ã€@Import"></a>4ã€@Import</h1><p>&emsp;&emsp;é€šè¿‡å¯¼å…¥çš„æ–¹å¼å®ç°æŠŠå®ä¾‹åŠ å…¥springIOCå®¹å™¨ä¸­ã€‚å¯ä»¥åœ¨éœ€è¦æ—¶å°†æ²¡æœ‰è¢«Springå®¹å™¨ç®¡ç†çš„ç±»å¯¼å…¥è‡³Springå®¹å™¨ä¸­ã€‚  </p>
<pre><code class="java">//ç±»å®šä¹‰
public class Square {}

public class Circular {}

//å¯¼å…¥
@Import({Square.class,Circular.class})
@Configuration
public class MainConfig{}
</code></pre>
<h1 id="5ã€-ImportResource"><a href="#5ã€-ImportResource" class="headerlink" title="5ã€@ImportResource"></a>5ã€@ImportResource</h1><p>&emsp;&emsp;å’Œ@Importç±»ä¼¼ï¼ŒåŒºåˆ«å°±æ˜¯@ImportResourceå¯¼å…¥çš„æ˜¯é…ç½®æ–‡ä»¶ã€‚  </p>
<pre><code class="java">@ImportResource(&quot;classpath:spring-redis.xml&quot;) //å¯¼å…¥xmlé…ç½®

public class CheckApiApplication {
    public static void main(String[] args) {
        SpringApplication.run(CheckApiApplication.class, args);
    }
}
</code></pre>
<h1 id="6ã€-Component"><a href="#6ã€-Component" class="headerlink" title="6ã€@Component"></a>6ã€@Component</h1><p>&emsp;&emsp;@Componentæ˜¯ä¸€ä¸ªå…ƒæ³¨è§£ï¼Œæ„æ€æ˜¯å¯ä»¥æ³¨è§£å…¶ä»–ç±»æ³¨è§£ï¼Œå¦‚@Controller @Service @Repositoryã€‚å¸¦æ­¤æ³¨è§£çš„ç±»è¢«çœ‹ä½œç»„ä»¶ï¼Œå½“ä½¿ç”¨åŸºäºæ³¨è§£çš„é…ç½®å’Œç±»è·¯å¾„æ‰«æçš„æ—¶å€™ï¼Œè¿™äº›ç±»å°±ä¼šè¢«å®ä¾‹åŒ–ã€‚å…¶ä»–ç±»çº§åˆ«çš„æ³¨è§£ä¹Ÿå¯ä»¥è¢«è®¤å®šä¸ºæ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„ç»„ä»¶ï¼Œæ¯”å¦‚@Controller æ§åˆ¶å™¨ï¼ˆæ³¨å…¥æœåŠ¡ï¼‰ã€@ServiceæœåŠ¡ï¼ˆæ³¨å…¥daoï¼‰ã€@Repository daoï¼ˆå®ç°daoè®¿é—®ï¼‰ã€‚@Componentæ³›æŒ‡ç»„ä»¶ï¼Œå½“ç»„ä»¶ä¸å¥½å½’ç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ³¨è§£è¿›è¡Œæ ‡æ³¨ï¼Œä½œç”¨å°±ç›¸å½“äº XMLé…ç½®ï¼Œ<bean id class>ã€‚  </bean></p>
<hr>  

<h1 id="Spring-Bootæœ€æ ¸å¿ƒçš„20ä¸ªæ³¨è§£"><a href="#Spring-Bootæœ€æ ¸å¿ƒçš„20ä¸ªæ³¨è§£" class="headerlink" title="Spring Bootæœ€æ ¸å¿ƒçš„20ä¸ªæ³¨è§£  "></a>Spring Bootæœ€æ ¸å¿ƒçš„20ä¸ªæ³¨è§£  </h1><h1 id="1ã€-SpringBootApplication"><a href="#1ã€-SpringBootApplication" class="headerlink" title="1ã€@SpringBootApplication"></a>1ã€@SpringBootApplication</h1><p>&emsp;&emsp;è¿™ä¸ªæ³¨è§£æ˜¯Spring Bootæœ€æ ¸å¿ƒçš„æ³¨è§£ï¼Œç”¨åœ¨ Spring Bootçš„ä¸»ç±»ä¸Šï¼Œæ ‡è¯†è¿™æ˜¯ä¸€ä¸ª Spring Boot åº”ç”¨ï¼Œç”¨æ¥å¼€å¯ Spring Boot çš„å„é¡¹èƒ½åŠ›ã€‚å®é™…ä¸Šè¿™ä¸ªæ³¨è§£æ˜¯@Configuration,@EnableAutoConfiguration,@ComponentScanä¸‰ä¸ªæ³¨è§£çš„ç»„åˆã€‚ç”±äºè¿™äº›æ³¨è§£ä¸€èˆ¬éƒ½æ˜¯ä¸€èµ·ä½¿ç”¨ï¼Œæ‰€ä»¥Spring Bootæä¾›äº†ä¸€ä¸ªç»Ÿä¸€çš„æ³¨è§£@SpringBootApplicationã€‚  </p>
<pre><code class="java">@SpringBootApplication(exclude =  {
    MongoAutoConfiguration.class, MongoDataAutoConfiguration.class, DataSourceAutoConfiguration.class, ValidationAutoConfiguration.class, MybatisAutoConfiguration.class, MailSenderAutoConfiguration.class, }
)
public class API {
    public static void main(String[] args) {
        SpringApplication.run(API.class, args);
    }
}
</code></pre>
<h1 id="2ã€-EnableAutoConfiguration"><a href="#2ã€-EnableAutoConfiguration" class="headerlink" title="2ã€@EnableAutoConfiguration"></a>2ã€@EnableAutoConfiguration</h1><p>&emsp;&emsp;å…è®¸ Spring Boot è‡ªåŠ¨é…ç½®æ³¨è§£ï¼Œå¼€å¯è¿™ä¸ªæ³¨è§£ä¹‹åï¼ŒSpring Boot å°±èƒ½æ ¹æ®å½“å‰ç±»è·¯å¾„ä¸‹çš„åŒ…æˆ–è€…ç±»æ¥é…ç½® Spring Beanã€‚å¦‚ï¼šå½“å‰ç±»è·¯å¾„ä¸‹æœ‰ Mybatis è¿™ä¸ª JAR åŒ…ï¼ŒMybatisAutoConfiguration æ³¨è§£å°±èƒ½æ ¹æ®ç›¸å…³å‚æ•°æ¥é…ç½® Mybatis çš„å„ä¸ª Spring Beanã€‚<br>&emsp;&emsp;@EnableAutoConfigurationå®ç°çš„å…³é”®åœ¨äºå¼•å…¥äº†AutoConfigurationImportSelectorï¼Œå…¶æ ¸å¿ƒé€»è¾‘ä¸ºselectImportsæ–¹æ³•ï¼Œé€»è¾‘å¤§è‡´å¦‚ä¸‹ï¼š  </p>
<ul>
<li>ä»é…ç½®æ–‡ä»¶META-INF/spring.factoriesåŠ è½½æ‰€æœ‰å¯èƒ½ç”¨åˆ°çš„è‡ªåŠ¨é…ç½®ç±»ï¼›</li>
<li>å»é‡ï¼Œå¹¶å°†excludeå’ŒexcludeNameå±æ€§æºå¸¦çš„ç±»æ’é™¤ï¼›  </li>
<li>è¿‡æ»¤ï¼Œå°†æ»¡è¶³æ¡ä»¶ï¼ˆ@Conditionalï¼‰çš„è‡ªåŠ¨é…ç½®ç±»è¿”å›ï¼›  </li>
</ul>
<pre><code class="java">@Target({ElementType.TYPE
})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Inherited
@AutoConfigurationPackage //å¯¼å…¥AutoConfigurationImportSelectorçš„å­ç±»@Import({EnableAutoConfigurationImportSelector.class})

public @interface EnableAutoConfiguration {
    String ENABLED_OVERRIDE_PROPERTY = &quot;spring.boot.enableautoconfiguration&quot;
    ;
    Class&lt;?&gt;[] exclude() default  {
    }
    ;
    String[] excludeName() default  {
    }
    ;
}
</code></pre>
<h1 id="3ã€-SpringBootConfiguration"><a href="#3ã€-SpringBootConfiguration" class="headerlink" title="3ã€@SpringBootConfiguration"></a>3ã€@SpringBootConfiguration</h1><p>&emsp;&emsp;è¿™ä¸ªæ³¨è§£å°±æ˜¯ @Configuration æ³¨è§£çš„å˜ä½“ï¼Œåªæ˜¯ç”¨æ¥ä¿®é¥°æ˜¯ Spring Boot é…ç½®è€Œå·²ï¼Œæˆ–è€…å¯åˆ©äº Spring Boot åç»­çš„æ‰©å±•ã€‚  </p>
<h1 id="4ã€-ConditionalOnBean"><a href="#4ã€-ConditionalOnBean" class="headerlink" title="4ã€@ConditionalOnBean"></a>4ã€@ConditionalOnBean</h1><p>&emsp;&emsp;@ConditionalOnBean(A.class)ä»…ä»…åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­å­˜åœ¨Aå¯¹è±¡æ—¶ï¼Œæ‰ä¼šå®ä¾‹åŒ–ä¸€ä¸ªBeanï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰å½“A.class åœ¨springçš„applicationContextä¸­å­˜åœ¨æ—¶ï¼Œè¿™ä¸ªå½“å‰çš„beanæ‰èƒ½å¤Ÿåˆ›å»ºã€‚  </p>
<pre><code class="java">@Bean
//å½“å‰ç¯å¢ƒä¸Šä¸‹æ–‡å­˜åœ¨DefaultMQProducerå®ä¾‹æ—¶ï¼Œæ‰èƒ½åˆ›å»ºRocketMQProducerLifecycleè¿™ä¸ªBean
@ConditionalOnBean(DefaultMQProducer.class)
public RocketMQProducerLifecycle rocketMQLifecycle() {
     return new RocketMQProducerLifecycle();
}
</code></pre>
<h1 id="5ã€-ConditionalOnMissingBean"><a href="#5ã€-ConditionalOnMissingBean" class="headerlink" title="5ã€@ConditionalOnMissingBean"></a>5ã€@ConditionalOnMissingBean</h1><blockquote>
<p>ç»„åˆ@Conditionalæ³¨è§£ï¼Œå’Œ@ConditionalOnBeanæ³¨è§£ç›¸åï¼Œä»…ä»…åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­ä¸å­˜åœ¨Aå¯¹è±¡æ—¶ï¼Œæ‰ä¼šå®ä¾‹åŒ–ä¸€ä¸ªBeanã€‚  </p>
</blockquote>
<pre><code class="java">@Bean
  //ä»…å½“å½“å‰ç¯å¢ƒä¸Šä¸‹æ–‡ç¼ºå¤±RocketMQProducerå¯¹è±¡æ—¶ï¼Œæ‰å…è®¸åˆ›å»ºRocketMQProducer Beanå¯¹è±¡
  @ConditionalOnMissingBean(RocketMQProducer.class)
  public RocketMQProducer mqProducer() {
      return new RocketMQProducer();
  }
</code></pre>
<h1 id="6ã€-ConditionalOnClass"><a href="#6ã€-ConditionalOnClass" class="headerlink" title="6ã€@ConditionalOnClass"></a>6ã€@ConditionalOnClass</h1><blockquote>
<p>ç»„åˆ @Conditional æ³¨è§£ï¼Œå¯ä»¥ä»…å½“æŸäº›ç±»å­˜åœ¨äºclasspathä¸Šæ—¶å€™æ‰åˆ›å»ºæŸä¸ªBeanã€‚  </p>
</blockquote>
<pre><code class="java"> @Bean
  //å½“classpathä¸­å­˜åœ¨ç±»HealthIndicatoræ—¶ï¼Œæ‰åˆ›å»ºHealthIndicator Beanå¯¹è±¡
  @ConditionalOnClass(HealthIndicator.class)
  public HealthIndicator rocketMQProducerHealthIndicator(Map&lt;String, DefaultMQProducer&gt; producers) {
      if (producers.size() == 1) {
          return new RocketMQProducerHealthIndicator(producers.values().iterator().next());
      }
  }
</code></pre>
<h1 id="7ã€-ConditionalOnMissingClass"><a href="#7ã€-ConditionalOnMissingClass" class="headerlink" title="7ã€@ConditionalOnMissingClass"></a>7ã€@ConditionalOnMissingClass</h1><p>&emsp;&emsp;ç»„åˆ@Conditionalæ³¨è§£ï¼Œå’Œ@ConditionalOnMissingClassæ³¨è§£ç›¸åï¼Œå½“classpathä¸­æ²¡æœ‰æŒ‡å®šçš„ Classæ‰å¼€å¯é…ç½®ã€‚  </p>
<h1 id="8ã€-ConditionalOnWebApplication"><a href="#8ã€-ConditionalOnWebApplication" class="headerlink" title="8ã€@ConditionalOnWebApplication"></a>8ã€@ConditionalOnWebApplication</h1><p>&emsp;&emsp;ç»„åˆ@Conditional æ³¨è§£ï¼Œå½“å‰é¡¹ç›®ç±»å‹æ˜¯ WEB é¡¹ç›®æ‰å¼€å¯é…ç½®ã€‚å½“å‰é¡¹ç›®æœ‰ä»¥ä¸‹ 3 ç§ç±»å‹:ANY(ä»»ä½•Webé¡¹ç›®éƒ½åŒ¹é…)ã€SERVLETï¼ˆä»…ä½†åŸºç¡€çš„Serveleté¡¹ç›®æ‰ä¼šåŒ¹é…ï¼‰ã€REACTIVEï¼ˆåªæœ‰åŸºäºå“åº”çš„webåº”ç”¨ç¨‹åºæ‰åŒ¹é…ï¼‰ã€‚  </p>
<h1 id="9ã€-ConditionalOnNotWebApplication"><a href="#9ã€-ConditionalOnNotWebApplication" class="headerlink" title="9ã€@ConditionalOnNotWebApplication"></a>9ã€@ConditionalOnNotWebApplication</h1><p>&emsp;&emsp;ç»„åˆ@Conditionalæ³¨è§£ï¼Œå’Œ@ConditionalOnWebApplication æ³¨è§£ç›¸åï¼Œå½“å‰é¡¹ç›®ç±»å‹ä¸æ˜¯ WEB é¡¹ç›®æ‰å¼€å¯é…ç½®ã€‚  </p>
<h1 id="10ã€-ConditionalOnProperty"><a href="#10ã€-ConditionalOnProperty" class="headerlink" title="10ã€@ConditionalOnProperty"></a>10ã€@ConditionalOnProperty</h1><p>&emsp;&emsp;ç»„åˆ @Conditional æ³¨è§£ï¼Œå½“æŒ‡å®šçš„å±æ€§æœ‰æŒ‡å®šçš„å€¼æ—¶æ‰å¼€å¯é…ç½®ã€‚å…·ä½“æ“ä½œæ˜¯é€šè¿‡å…¶ä¸¤ä¸ªå±æ€§nameä»¥åŠhavingValueæ¥å®ç°çš„ï¼Œå…¶ä¸­nameç”¨æ¥ä»application.propertiesä¸­è¯»å–æŸä¸ªå±æ€§å€¼ï¼Œå¦‚æœè¯¥å€¼ä¸ºç©ºï¼Œåˆ™è¿”å›false;å¦‚æœå€¼ä¸ä¸ºç©ºï¼Œåˆ™å°†è¯¥å€¼ä¸havingValueæŒ‡å®šçš„å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸€æ ·åˆ™è¿”å›true;å¦åˆ™è¿”å›falseã€‚å¦‚æœè¿”å›å€¼ä¸ºfalseï¼Œåˆ™è¯¥configurationä¸ç”Ÿæ•ˆï¼›ä¸ºtrueåˆ™ç”Ÿæ•ˆã€‚  </p>
<pre><code class="java"> @Bean
 //åŒ¹é…å±æ€§rocketmq.producer.enabledå€¼æ˜¯å¦ä¸ºtrue
 @ConditionalOnProperty(value = &quot;rocketmq.producer.enabled&quot;, havingValue = &quot;true&quot;, matchIfMissing = true)
 public RocketMQProducer mqProducer() {
     return new RocketMQProducer();
 }
</code></pre>
<h1 id="11ã€-ConditionalOnExpression"><a href="#11ã€-ConditionalOnExpression" class="headerlink" title="11ã€@ConditionalOnExpression"></a>11ã€@ConditionalOnExpression</h1><blockquote>
<p>ç»„åˆ @Conditional æ³¨è§£ï¼Œå½“ SpEL è¡¨è¾¾å¼ä¸º true æ—¶æ‰å¼€å¯é…ç½®ã€‚  </p>
</blockquote>
<pre><code class="java">@Configuration
@ConditionalOnExpression(&quot;${enabled:false}&quot;)
public class BigpipeConfiguration {
    @Bean
    public OrderMessageMonitor orderMessageMonitor(ConfigContext configContext) {
        return new OrderMessageMonitor(configContext);
    }
}
</code></pre>
<h1 id="12ã€-ConditionalOnJava"><a href="#12ã€-ConditionalOnJava" class="headerlink" title="12ã€@ConditionalOnJava"></a>12ã€@ConditionalOnJava</h1><p>&emsp;&emsp;ç»„åˆ@Conditional æ³¨è§£ï¼Œå½“è¿è¡Œçš„ Java JVM åœ¨æŒ‡å®šçš„ç‰ˆæœ¬èŒƒå›´æ—¶æ‰å¼€å¯é…ç½®ã€‚  </p>
<h1 id="13ã€-ConditionalOnResource"><a href="#13ã€-ConditionalOnResource" class="headerlink" title="13ã€@ConditionalOnResource"></a>13ã€@ConditionalOnResource</h1><p>&emsp;&emsp;ç»„åˆ @Conditional æ³¨è§£ï¼Œå½“ç±»è·¯å¾„ä¸‹æœ‰æŒ‡å®šçš„èµ„æºæ‰å¼€å¯é…ç½®  </p>
<pre><code class="java">@Bean
@ConditionalOnResource(resources=&quot;classpath:shiro.ini&quot;)
protected Realm iniClasspathRealm(){
  return new Realm();
}
</code></pre>
<h1 id="14ã€-ConditionalOnJndi"><a href="#14ã€-ConditionalOnJndi" class="headerlink" title="14ã€@ConditionalOnJndi"></a>14ã€@ConditionalOnJndi</h1><p>&emsp;&emsp;ç»„åˆ @Conditional æ³¨è§£ï¼Œå½“æŒ‡å®šçš„ JNDI å­˜åœ¨æ—¶æ‰å¼€å¯é…ç½®ã€‚  </p>
<h1 id="15ã€-ConditionalOnCloudPlatform"><a href="#15ã€-ConditionalOnCloudPlatform" class="headerlink" title="15ã€@ConditionalOnCloudPlatform"></a>15ã€@ConditionalOnCloudPlatform</h1><p>&emsp;&emsp;ç»„åˆ @Conditional æ³¨è§£ï¼Œå½“æŒ‡å®šçš„äº‘å¹³å°æ¿€æ´»æ—¶æ‰å¼€å¯é…ç½®ã€‚  </p>
<h1 id="16ã€-ConditionalOnSingleCandidate"><a href="#16ã€-ConditionalOnSingleCandidate" class="headerlink" title="16ã€@ConditionalOnSingleCandidate"></a>16ã€@ConditionalOnSingleCandidate</h1><p>&emsp;&emsp;ç»„åˆ @Conditional æ³¨è§£ï¼Œå½“æŒ‡å®šçš„ class åœ¨å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ª Beanï¼Œæˆ–è€…åŒæ—¶æœ‰å¤šä¸ªä½†ä¸ºé¦–é€‰æ—¶æ‰å¼€å¯é…ç½®ã€‚  </p>
<h1 id="17ã€-ConfigurationProperties"><a href="#17ã€-ConfigurationProperties" class="headerlink" title="17ã€@ConfigurationProperties"></a>17ã€@ConfigurationProperties</h1><p>&emsp;&emsp;Spring Bootå¯ä½¿ç”¨æ³¨è§£çš„æ–¹å¼å°†è‡ªå®šä¹‰çš„propertiesæ–‡ä»¶æ˜ å°„åˆ°å®ä½“beanä¸­ï¼Œæ¯”å¦‚config.propertiesæ–‡ä»¶ã€‚  </p>
<pre><code class="java">@Data
@ConfigurationProperties(&quot;rocketmq.consumer&quot;)
public class RocketMQConsumerProperties extends RocketMQProperties {
    private boolean enabled = true;

    private String consumerGroup;

    private MessageModel messageModel = MessageModel.CLUSTERING;

    private ConsumeFromWhere consumeFromWhere = ConsumeFromWhere.CONSUME_FROM_LAST_OFFSET;

    private int consumeThreadMin = 20;

    private int consumeThreadMax = 64;

    private int consumeConcurrentlyMaxSpan = 2000;

    private int pullThresholdForQueue = 1000;

    private int pullInterval = 0;

    private int consumeMessageBatchMaxSize = 1;

    private int pullBatchSize = 32;
}
</code></pre>
<h1 id="18ã€-EnableConfigurationProperties"><a href="#18ã€-EnableConfigurationProperties" class="headerlink" title="18ã€@EnableConfigurationProperties"></a>18ã€@EnableConfigurationProperties</h1><p>&emsp;&emsp;å½“@EnableConfigurationPropertiesæ³¨è§£åº”ç”¨åˆ°ä½ çš„@Configurationæ—¶ï¼Œä»»ä½•è¢«@ConfigurationPropertiesæ³¨è§£çš„beanså°†è‡ªåŠ¨è¢«Environmentå±æ€§é…ç½®ã€‚ è¿™ç§é£æ ¼çš„é…ç½®ç‰¹åˆ«é€‚åˆä¸SpringApplicationçš„å¤–éƒ¨YAMLé…ç½®è¿›è¡Œé…åˆä½¿ç”¨ã€‚  </p>
<pre><code class="java">@Configuration
@EnableConfigurationProperties({
    RocketMQProducerProperties.class,
    RocketMQConsumerProperties.class,
})
@AutoConfigureOrder
public class RocketMQAutoConfiguration {
    @Value(&quot;${spring.application.name}&quot;)
    private String applicationName;
}
</code></pre>
<h1 id="19ã€-AutoConfigureAfter"><a href="#19ã€-AutoConfigureAfter" class="headerlink" title="19ã€@AutoConfigureAfter"></a>19ã€@AutoConfigureAfter</h1><p>&emsp;&emsp;ç”¨åœ¨è‡ªåŠ¨é…ç½®ç±»ä¸Šé¢ï¼Œè¡¨ç¤ºè¯¥è‡ªåŠ¨é…ç½®ç±»éœ€è¦åœ¨å¦å¤–æŒ‡å®šçš„è‡ªåŠ¨é…ç½®ç±»é…ç½®å®Œä¹‹åã€‚<br>å¦‚ Mybatis çš„è‡ªåŠ¨é…ç½®ç±»ï¼Œéœ€è¦åœ¨æ•°æ®æºè‡ªåŠ¨é…ç½®ç±»ä¹‹åã€‚  </p>
<pre><code class="java">@AutoConfigureAfter(DataSourceAutoConfiguration.class)
public class MybatisAutoConfiguration {
}
</code></pre>
<h1 id="20ã€-AutoConfigureBefore"><a href="#20ã€-AutoConfigureBefore" class="headerlink" title="20ã€@AutoConfigureBefore"></a>20ã€@AutoConfigureBefore</h1><p>&emsp;&emsp;è¿™ä¸ªå’Œ@AutoConfigureAfteræ³¨è§£ä½¿ç”¨ç›¸åï¼Œè¡¨ç¤ºè¯¥è‡ªåŠ¨é…ç½®ç±»éœ€è¦åœ¨å¦å¤–æŒ‡å®šçš„è‡ªåŠ¨é…ç½®ç±»é…ç½®ä¹‹å‰ã€‚  </p>
<h1 id="21ã€-AutoConfigureOrder"><a href="#21ã€-AutoConfigureOrder" class="headerlink" title="21ã€@AutoConfigureOrder"></a>21ã€@AutoConfigureOrder</h1><p>&emsp;&emsp;Spring Boot 1.3.0ä¸­æœ‰ä¸€ä¸ªæ–°çš„æ³¨è§£@AutoConfigureOrderï¼Œç”¨äºç¡®å®šé…ç½®åŠ è½½çš„ä¼˜å…ˆçº§é¡ºåºã€‚  </p>
<pre><code class="java">  @AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE) // è‡ªåŠ¨é…ç½®é‡Œé¢çš„æœ€é«˜ä¼˜å…ˆçº§
  @Configuration
  @ConditionalOnWebApplication // ä»…é™äºwebåº”ç”¨
  @Import(BeanPostProcessorsRegistrar.class) // å¯¼å…¥å†…ç½®å®¹å™¨çš„è®¾ç½®
  public class EmbeddedServletContainerAutoConfiguration {
      @Configuration
      @ConditionalOnClass({ Servlet.class, Tomcat.class })
      @ConditionalOnMissingBean(value = EmbeddedServletContainerFactory.class, search = SearchStrategy.CURRENT)
      public static class EmbeddedTomcat {
         // ...
      }

      @Configuration
      @ConditionalOnClass({ Servlet.class, Server.class, Loader.class, WebAppContext.class })
      @ConditionalOnMissingBean(value = EmbeddedServletContainerFactory.class, search = SearchStrategy.CURRENT)
      public static class EmbeddedJetty {
         // ...
      }
}
</code></pre>
<hr>
<p><strong><font color="red" size="3" face="ä»¿å®‹">æœ¬æ¬¡è®°å½•åˆ°æ­¤ç»“æŸï¼Œæ¬¢è¿è®¢é˜…ã€å…³æ³¨ã€æ”¶è—ã€è¯„è®ºã€ç‚¹èµå“¦ï½ï½(ï¿£â–½ï¿£ï½)ï½</font></strong></p>
<p><strong><font color="red" size="3" face="ä»¿å®‹">å“‡å’”å’”(âˆªï½¡âˆª)ï½¡ï½¡ï½¡zzz</font></strong></p>

        </div>
        <!-- .entry-content -->
        <div class="single-reward">
          <div class="reward-open">èµ
            <div class="reward-main">
              <ul class="reward-row">
                <li class="alipay-code"><img src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/custom/AliPayQR.jpg"></li>
                <li class="wechat-code"><img src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/custom/WeChanSQ.png"></li>
              </ul>
            </div>
          </div>
        </div>
        <div style="text-align:center; width: 100%" class="social-share share-mobile" data-disabled="diandian, tencent"></div>
        <footer class="post-footer">
          <div class="post-lincenses"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="nofollow"><i class="fa fa-creative-commons" aria-hidden="true"></i> çŸ¥è¯†å…±äº«ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™…è®¸å¯åè®®</a></div>
          <div class="post-tags">
          </div>
          <div class="post-share">
            <div class="social-share sharehidden share-component"></div>
            <i class="iconfont show-share icon-forward"></i>
          </div>
        </footer><!-- .entry-footer -->
      </article>
      <!-- #post-## -->
      <div class="toc" style="background: none;"></div>
      <section class="post-squares nextprev">
        
          
            <div class="post-nepre half previous">
          
            <a href="/2019/12/12/2019-12-12-note-3/" rel="prev">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/uploads/2019-12-12-note-3.png" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/uploads/2019-12-12-note-3.png">
              </div>
              <span class="label">
              Previous Post</span>
              <div class="info">
                <h3>
                å…³äºjavaå®ä½“çš„å‡ ä¸ªæ¦‚å¿µ</h3>
                <hr>
              </div>
            </a>
          </div>
        
        
          
            <div class="post-nepre half next">
          
            <a href="/2019/12/12/2019-12-12-note-1/" rel="next">
              <div class="background">
                <img class="lazyload" src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/loader/orange.progress-bar-stripe-loader.svg" data-src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/uploads/2019-12-12-note-1.png" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;" onerror="imgError(this,3)" src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/uploads/2019-12-12-note-1.png">
              </div>
              <span class="label">
              Next Post</span>
              <div class="info">
                <h3>
                WebFilteræ³¨è§£çš„äº†è§£</h3>
                <hr>
              </div>
            </a>
          </div>
        
      </section>
      
<div id="vcomments"></div>
<script>
  window.onload = function(){
      var valine = new Valine();
      valine.init({
        el: '#vcomments',
        appId: "uxygA8bNWrpfwUvb6bMzegq8-gzGzoHsz",
        appKey: "E4hOT01N1yMBmFGk0koDAj9v",
        path: window.location.pathname,
        placeholder: "ä½ æ˜¯æˆ‘ä¸€ç”Ÿåªä¼šé‡è§ä¸€æ¬¡çš„æƒŠå–œ ..."
      })
  }
</script>

      <section class="author-profile">
        <div class="info" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
          <a href="" class="profile gravatar"><img src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3/img/avatar.png" itemprop="image" alt="yibin" height="70" width="70"></a>
          <div class="meta">
            <span class="title">Author</span>
            <h3 itemprop="name">
            <a href="" itemprop="url" rel="author">yibin</a>
            </h3>
          </div>
        </div>
        <hr>
        <p><i class="iconfont icon-write"></i>ä¸€ä¸ªé—²å¾—æ— èŠçš„äºº</p>
      </section>
    </main><!-- #main -->
  </div><!-- #primary -->
</div>



    </div>    
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="è¯·è¾“å…¥å…³é”®è¯..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'æ–‡ç« ',
            // PAGES: 'é¡µé¢',
            CATEGORIES: 'åˆ†ç±»',
            TAGS: 'æ ‡ç­¾',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
    <!-- <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 liaoyibin<br>
      powered_by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer> -->
<footer id="colophon" class="site-footer" role="contentinfo">
  <div class="site-info">
    <div class="footertext">
      <div class="img-preload">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/wordpress-rotating-ball-o.svg">
        <img src="https://cdn.jsdelivr.net/gh/honjun/cdn@1.6/img/other/disqus-preloader.svg">
      </div>
      <p style="color: #666666;">&copy 2018</p>
    </div>
    <div class="footer-device">
    <p style="font-family: 'Ubuntu', sans-serif;">
        <span style="color: #b9b9b9;">Theme <a href="https://github.com/honjun/hexo-theme-sakura" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Sakura</a> <i class="iconfont icon-sakura rotating" style="color: #ffc0cb;display:inline-block"></i> by <a href="https://2heng.xin/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Mashiro</a>&<a href="https://www.hojun.cn/" target="_blank" style="color: #b9b9b9;;text-decoration: underline dotted rgba(0, 0, 0, .1);">Hojun</a>, Powered by Hexo, Hosted by Coding Pages</a>
        </span>
      </p>
    </div>
  </div><!-- .site-info -->
</footer>



<!-- <script src="/js/tocbot.js"></script> -->
<script type="text/javascript" src="/js/lib.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script type="text/javascript" src="/js/InsightSearch.js"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>
<script type="text/javascript" src="/js/zoom.min.js"></script>
<script type="text/javascript" src="/js/sakura-app.js"></script>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='//unpkg.com/valine@1.3.4/dist/Valine.min.js'></script>
<script src="/js/botui.js"></script>
<!-- ä¸è’œå­ ç½‘é¡µè®¡æ•°å™¨ -->
<script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script> -->
<script type="text/javascript">
/* <![CDATA[ */
if (/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2","name":"Unbroken.mp4","live":"close"},"windowheight":"fixed","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
} else {
  var Poi = {"pjax":"1","movies":{"url": "https://cdn.jsdelivr.net/gh/honjun/hojun@1.2","name":"Unbroken.mp4","live":"open"},"windowheight":"auto","codelamp":"close","ajaxurl":"","order":"asc","formpostion":"bottom"};
}
/* ]]> */

</script>
<script>
$(document).ready(function() {
  if ($(".toc").length > 0 && document.body.clientWidth > 1200) {
    if ($(".pattern-center").length > 0) { //æœ‰å›¾çš„æƒ…å†µ
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // æ”¾ç½®ç›®å½•çš„å®¹å™¨
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // æ­£æ–‡å†…å®¹æ‰€åœ¨
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // éœ€è¦ç´¢å¼•çš„æ ‡é¢˜çº§åˆ«
          headingsOffset: -400,
          scrollSmoothOffset: -85
      });
    } else {
      tocbot.init({
          // Where to render the table of contents.
          tocSelector: '.toc', // æ”¾ç½®ç›®å½•çš„å®¹å™¨
          // Where to grab the headings to build the table of contents.
          contentSelector: '.entry-content', // æ­£æ–‡å†…å®¹æ‰€åœ¨
          // Which headings to grab inside of the contentSelector element.
          scrollSmooth: true,
          headingSelector: 'h1, h2, h3, h4, h5', // éœ€è¦ç´¢å¼•çš„æ ‡é¢˜çº§åˆ«
          headingsOffset: -85,
          scrollSmoothOffset: -85
      });
    }
    var offsetTop = $('.toc').offset().top - 95;
    window.onscroll = function() {
      var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;
      if (scrollTop >= offsetTop) {
        $('.toc').addClass('toc-fixed');
      } else {
        $('.toc').removeClass('toc-fixed');
      }
    }
  }
});
</script>

    <div class="openNav no-select" style="height: 50px;">
      <div class="iconflat no-select" style="width: 50px; height: 50px;">
        <div class="icon"></div>
      </div>
      <div class="site-branding search-form-submit">
        <i class="iconfont js-toggle-search iconsearch icon-search"></i>
      </div>
    </div>
  </section>
  <div id="mo-nav" class="">
  <div class="m-avatar">
    <img src="https://cdn.jsdelivr.net/gh/yibinliao/CDN@v1.3.1/img/avatar.png">
  </div>
  <p style="text-align: center; color: #333; font-weight: 900; font-family: 'Ubuntu', sans-serif; letter-spacing: 1.5px">ãƒŠãƒãƒ¥ãƒ©ãƒ«blnp</p>
  <p style="text-align: center; word-spacing: 20px;">
    
      
        <a href="http://github.com/yibinliao" class="fa fa-github" target="_blank" style="color: #333; margin-left:20px"></a>
      
        <a href="https://weibo.com/p/1005055035417004/home?from=page_100505&mod=TAB#place" class="fa fa-weibo" target="_blank" style="color: #dd4b39; margin-left:20px"></a>
      
        <a href="https://wpa.qq.com/msgrd?v=3&uin=2045165565&site=qq&menu=yes" class="fa fa-qq" target="_blank" style="color: #25c6fe; margin-left:20px"></a>
      
    
  </p>
  <ul id="menu-new-1" class="menu">
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-fort-awesome faa-shake" aria-hidden="true"></i>
            é¦–é¡µ
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/archives">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-archive faa-shake" aria-hidden="true"></i>
            å½’æ¡£
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/categories/æŠ€æœ¯/">
                  <i class="fa fa-code" aria-hidden="true"></i>
                  æŠ€æœ¯
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="javascript:;">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-list-ul faa-vertical" aria-hidden="true"></i>
            æ¸…å•
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/tags/æ‚¦è¯»/">
                  <i class="fa fa-th-list faa-bounce" aria-hidden="true"></i>
                  ä¹¦å•
                </a>
              </li>
            
              <li>
                <a href="/bangumi/">
                  <i class="fa fa-film faa-vertical" aria-hidden="true"></i>
                  ç•ªç»„
                </a>
              </li>
            
              <li>
                <a href="/music/">
                  <i class="fa fa-headphones" aria-hidden="true"></i>
                  æ­Œå•
                </a>
              </li>
            
              <li>
                <a href="/tags/å›¾é›†/">
                  <i class="fa fa-photo" aria-hidden="true"></i>
                  å›¾é›†
                </a>
              </li>
            
          </ul>
        
      </li>
    
      <li>
        <a href="/comment/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-pencil-square-o faa-tada" aria-hidden="true"></i>
            ç•™è¨€æ¿
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/links/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-link faa-shake" aria-hidden="true"></i>
            å‹äººå¸
          </span>
        </a>
        
      </li>
    
      <li>
        <a href="/">
          <span class="faa-parent animated-hover">
            <i class="fa  fa-leaf faa-wrench" aria-hidden="true"></i>
            å…³äº
          </span>
        </a>
        
          <ul class="sub-menu">
            
              <li>
                <a href="/about/">
                  <i class="fa fa-meetup" aria-hidden="true"></i>
                  æˆ‘ï¼Ÿ
                </a>
              </li>
            
              <li>
                <a href="/theme-sakura/">
                  <i class="fa iconfont icon-sakura" aria-hidden="true"></i>
                  ä¸»é¢˜
                </a>
              </li>
            
              <li>
                <a href="/lab/">
                  <i class="fa fa-cogs" aria-hidden="true"></i>
                  Lab
                </a>
              </li>
            
          </ul>
        
      </li>
    
  </ul>
  <p style="text-align: center; font-size: 13px; color: #b9b9b9;">&copy 2019 hexo-sakura</p>
</div>
<button onclick="topFunction()" class="mobile-cd-top" id="moblieGoTop" title="Go to top" style="display: none;"><i class="fa fa-chevron-up" aria-hidden="true"></i></button>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
<style>
  .aplayer .aplayer-lrc {
    height: 35px;
  }
  .aplayer .aplayer-lrc p{
    font-size: 16px;
    font-weight: 700;
    line-height: 18px !important;
  }
  .aplayer .aplayer-lrc p.aplayer-lrc-current{
    color: #FF1493;
  }
  .aplayer.aplayer-narrow .aplayer-body{
    left: -66px !important;
  }
  .aplayer.aplayer-fixed .aplayer-lrc {
    display: none;
  }
  .aplayer .aplayer-lrc.aplayer-lrc-hide {
      display:none !important;
  }
  .aplayer.aplayer-fixed .lrc-show {
    display: block;
    background: rgba(255, 255, 255, 0.8);
  }
</style>
<meting-js

    id="2660651585"

    server="netease"

    type="playlist"

    fixed="true"

    autoplay="false"

    loop="all"

    order="random"

    preload="auto"

    volume="0.7"

    mutex="true"

</meting-js>
<script>
  $(function(){
    $('body').on('click', '.aplayer', function(){
      if($('.aplayer-button').hasClass('aplayer-play')) {
        $('.aplayer-lrc').removeClass('lrc-show');
      } else {
        $('.aplayer-lrc').addClass('lrc-show');
      }
    })
  });
</script>
</body>
</html>